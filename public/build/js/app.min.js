function init(){"use strict";new QueryLoader2(document.querySelector("body"),{barColor:"#ffffff",backgroundColor:"#2e2e2f",percentage:!0,barHeight:4,minimumTime:2500,fadeOutTime:700})}function initialize(e){posGlobal=new google.maps.LatLng(e.coords.latitude,e.coords.longitude);{var t={scrollwheel:!1,navigationControl:!1,mapTypeControl:!1,scaleControl:!1,draggable:!1,zoom:18,center:posGlobal,disableDefaultUI:!0,mapTypeId:google.maps.MapTypeId.SATELLITE},o=new google.maps.Map(document.getElementById("map-canvas"),t);new google.maps.Marker({position:new google.maps.LatLng(e.coords.latitude,e.coords.longitude),map:o,animation:google.maps.Animation.DROP})}google.maps.event.addDomListener(window,"scroll",function(){google.maps.event.trigger(o,"resize"),o.setCenter(posGlobal)})}function animate(){ctx.fillStyle="#608a36",ctx.fillRect(0,0,w,h),ctx.lineWidth=11,ctx.strokeStyle="#1f2c13",ctx.strokeRect(0,0,w,h),$.each(snakesArr,function(e,t){t.draw("#1f2c13","white",w,h,food)}),food.draw(),setTimeout(function(){animate()},100)}function getWorker(){var e=new Worker("scripts/weather/weather.js");return e.onmessage=workDone,e.onerror=workErr,e}function workDone(e){function t(e){return e>=0&&47>=e?e>=0&&4>=e?"thunder":e>=5&&7>=e?"rain":e>=8&&10>=e?"drizzle":e>=11&&12>=e?"rain":e>=13&&16>=e?"snow":17==e?"hail":20==e?"fog":24==e?"wind":e>=27&&30>=e?"cloudsun":32==e?"sun":e>=44&&47>=e?"cloudsun":"sun":void 0}function o(e,t){$("#tempHighP").text(t+"° (max)"),$("#tempLowP").text(e+"° (min)"),t>=20&&$($("#tempHighImg")[0]).attr("src","/img/weather/thermometer100.svg")}function n(e,t){$("#sunriseP").text(e),$("#sunsetP").text(t)}function i(e,o){$($("#tomorow #day")[0]).text(e.day),$($("#dayAfter #day")[0]).text(o.day),$($("#tomorow #weather img")[0]).attr("src","/img/weather/"+t(e.code)+".svg"),$($("#dayAfter #weather img")[0]).attr("src","/img/weather/"+t(o.code)+".svg"),$("#tempLowPTom").text(e.low+"° (min)"),$("#tempHighPTom").text(e.high+"° (max)"),$("#tempLowPAft").text(o.low+"° (min)"),$("#tempHighPAft").text(o.high+"° (max)")}$("#location").text(e.data.location.city+" - "+e.data.location.country),t(e.data.item.forecast[0].code),$($("#weather img")[0]).attr("src","/img/weather/"+t(e.data.item.forecast[0].code)+".svg"),o(e.data.item.forecast[0].low,e.data.item.forecast[0].high),n(e.data.astronomy.sunrise,e.data.astronomy.sunset),i(e.data.item.forecast[1],e.data.item.forecast[2])}function workErr(){}function handleMessage(e){function t(e,t){function o(){n.readyState<4||200===n.status&&4===n.readyState&&t(n)}var n;if("undefined"!=typeof XMLHttpRequest)n=new XMLHttpRequest;else for(var i=["MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],s=0,a=i.length;a>s;s++)try{n=new ActiveXObject(i[s]);break}catch(r){}n.onreadystatechange=o,n.open("GET",e,!0),n.send("")}!function(e){var o=function(e){postMessage(JSON.parse(e.response).query.results.channel)},n=function(e){var n=JSON.parse(e.response).query.results.Result.woeid;t("https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20weather.forecast%20where%20woeid%3D"+n+"%20and%20u=%27c%27&format=json",o)};t("https://query.yahooapis.com/v1/public/yql?q=SELECT%20*%20FROM%20geo.placefinder%20WHERE%20text%3D%22"+e.k+"%2C%20"+e.D+"%22%20and%20gflags%3D%22R%22%0A%0A&format=json&diagnostics=true&callback=",n)}(e.data)}var socket=io.connect();skrollr.init({smoothScrolling:!1,mobileDeceleration:.004}),$(document).ready(init);var socket=io.connect();$("#txtUsername").show();var messageLeft=$(".messageLeft"),messagRight=$(".messageRight");$(".messageLeft").remove(),$(".messageRight").remove();var currentRoom="",username="",messagesArr=[],socketId="";$("#txtUsername").keydown(function(e){13===e.keyCode&&""!==$(this).val()&&(username=$(this).val(),$(this).hide(),$("label").hide(),$("#selectRooms").show(),$("#rooms p").hide(),$("#chatInput").show())}),$("#selectRooms").change(function(){socket.emit("roomSelected",{room:$(this).val(),name:username}),currentRoom=$(this).val(),$("#selectRooms").hide(),$("#chatInput").show(),$("#changeRoom").show(),$("#chatInput").attr("placeholder","Press enter to submit"),$("#rooms p").show(),$("#rooms p").text("Room: "+currentRoom)}),$("#rooms p").click(function(){"please fill in a username below"!==$(this).text()&&($(this).hide(),currentRoom="",$("#messages").children().remove(),$("#selectRooms").show(),$("#rooms p").hide(),$("#chatInput").attr("placeholder","Please Select a room above"),socket.emit("leaveRoom",currentRoom))}),$("#chatInput").keydown(function(e){13===e.keyCode&&(""!==$(this).val()&&""!==currentRoom?($("#chatInput").attr("placeholder","Press enter to submit"),socket.emit("message",$(this).val())):$("#chatInput").attr("placeholder","Please Select a room above"),$(this).val(""))}),socket.on("newMessage",function(e){$("#messages").children().length>=4&&$("#messages").children(":first-child").remove(),socketId==e.id?(messagRight.children(".message").text(e.mes),messagRight.children(".userTime").text(e.name+" "+e.time),messagRight.clone().appendTo("#messages")):(messageLeft.children(".message").text(e.mes),messageLeft.children(".userTime").text(e.name+" "+e.time),messageLeft.clone().appendTo("#messages"))}),socket.on("id",function(e){socketId=e});var posGlobal;!function(){function e(e){initialize(e)}function t(e){posGlobal={D:50.8333,k:50.8333};var t="";switch(e.code){case e.PERMISSION_DENIED:t="This website does not have permission to use the Geolocation API";break;case e.POSITION_UNAVAILABLE:t="The current position could not be determined.";break;case e.PERMISSION_DENIED_TIMEOUT:t="The current position could not be determined within the specified timeout period.";break;default:initialize(o)}if(""===t){var n=e.code.toString();t="The position could not be determined due to an unknown error (Code: "+n+")."}}var o,n=null;if(null===n&&(n=window.navigator),null!==n){var i=n.geolocation;null!==i&&i.getCurrentPosition(e,t)}}();var socket=io.connect(),socketId;$("#playPic").on("click",function(){socket.emit("playPic")}),socket.on("readyPic",function(e){socketId=e,$("#pictionaryDiv").show(),$("#picCanvas")[0].width=825,$("#picCanvas")[0].height=515,$("#waitingPic").show()}),socket.on("playersReadyPic",function(e){function t(e){for(var t,o,n=e.length;n;t=parseInt(Math.random()*n),o=e[--n],e[n]=e[t],e[t]=o);return e}function o(t){h+=$(t.currentTarget).text(),$("#textGuesed").text(h),$(t.currentTarget).remove(),h.split("").length===e.word.word.split("").length&&(h===e.word.word?socket.emit("geusedRight",e.arr[0].room):(socket.emit("geusedWrong",{room:e.arr[0].room,text:h}),h="",$("#textGuesed").text(h),$.each(d,function(e,t){$("#chars").append("<p class='char'>"+t+"</p>")}),$(".char").on("click",o)))}function n(e){var t=$("#picCanvas")[0].getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}function i(t){socket.emit("draw",{room:e.arr[0].room,x:n(t).x,y:n(t).y,c:c})}function s(t){socket.emit("erase",{room:e.arr[0].room,x:n(t).x,y:n(t).y})}var a=!1,r=!1,c=0;if(e.arr[0].id==socketId)$("#waitingPic").text("You draw"),$("#picCanvas").bind("contextmenu",function(){return!1}),$("#picCanvas").on("mousedown",function(e){1===e.which?a=!0:r=!0}),$("#picCanvas").on("mouseup",function(e){1===e.which?a=!1:r=!1}),$("#picCanvas").on("mousemove",function(e){a&&i(e),r&&s(e)}),$("#textGues").text(e.word.word),$("#textGues").show(),socket.on("wrongGeusServer",function(e){$("#textGues").hide(),$("#opendGues").text("Jouw tegenstander raade "+e),setTimeout(function(){$("#opendGues").text(""),$("#textGues").show()},3e3)});else{$("#waitingPic").text("You guess"),$("#krijtjes").hide();var d=t(e.word.word.split(""));$.each(d,function(e,t){$("#chars").append("<p class='char'>"+t+"</p>")});var h="";$(".char").on("click",o)}setTimeout(function(){$("#waitingPic").hide()},2e3),$(window).keydown(function(e){e.keyCode>=49&&e.keyCode<=53&&(49===e.keyCode&&(c=0),50===e.keyCode&&(c=1),51===e.keyCode&&(c=2),52===e.keyCode&&(c=3),53===e.keyCode&&(c=4))}),$("#black").click(function(){c=4}),$("#white").click(function(){c=3}),$("#blue").click(function(){c=2}),$("#green").click(function(){c=1}),$("#red").click(function(){c=0}),socket.on("quesedRightServer",function(){$("#textGues").text("Goed geraden!"),$("#textGuesed").text("Goed geraden!")})}),socket.on("drawServer",function(e){var t=$("#picCanvas")[0].getContext("2d");t.beginPath(),t.arc(e.x,e.y,10,0,2*Math.PI,!1),t.fillStyle=e.color,t.fill()}),socket.on("eraseServer",function(e){var t=$("#picCanvas")[0].getContext("2d");t.clearRect(e.x,e.y,20,20)});var socket=io.connect(),canvas=$("#snakeCanvas")[0],ctx=canvas.getContext("2d"),w,h,celWidth=10,snakesArr=[],food,snake,socketid="",score=0;canvas.width=900,canvas.height=650,$("#snakePlay").on("click",function(e){$("#snakeDiv").show(),$("#date").hide(),w=canvas.width,h=canvas.height,socket.emit("play"),$(e.currentTarget).hide()}),socket.on("ready",function(e){socketid=e,snake=new Snake(e,5,[],50,10),snake.create(),socket.emit("newSnake",{snake:snake,w:w,h:h,celWidth:celWidth})}),socket.on("PlayersReady",function(e){$("#waiting").hide(),snakesArr=e.snakes,$("#numplayers").text(snakesArr.length+" players"),$.each(snakesArr,function(e,t){t.__proto__=Object.getPrototypeOf(snake),t.id===socketid&&($("#player").text("You are player "+(e+1)),t.player=e+1)}),food=new Food(e.food.x,e.food.y),animate()}),$(window).keydown(function(e){var t=e.keyCode;t>=37&&40>=t&&(e.preventDefault(),$.each(snakesArr,function(e,o){o.id===socketid&&(37===t&&"right"!==o.direction?socket.emit("control",{d:"left",x:o.nx,y:o.ny}):38===t&&"down"!==o.direction?socket.emit("control",{d:"up",x:o.nx,y:o.ny}):39===t&&"left"!==o.direction?socket.emit("control",{d:"right",x:o.nx,y:o.ny}):40===t&&"up"!==o.direction&&socket.emit("control",{d:"down",x:o.nx,y:o.ny}))}))}),socket.on("serverControl",function(e){$.each(snakesArr,function(t,o){o.id===e.id&&o.direction!==e.control.d&&(o.direction=e.control.d)})}),socket.on("newFood",function(e){food.x=e.x,food.y=e.y,$.each(snakesArr,function(t,o){o.id===e.id&&(o.tail={x:o.nx,y:o.ny})})}),socket.on("deadServer",function(e){$.each(snakesArr,function(t,o){o.id===e.id&&(score=o.length,snakesArr.splice(t,1))}),$("#waiting").show(),$("#highscoreInput").show(),$("#waiting h4").text(e.id==socketid?"you lost":"you won")}),socket.on("disconnect",function(e){$.each(snakesArr,function(t,o){o.id===e.id&&snakesArr.splice(t,1)})}),$("#highscore").click(function(){""!==$("#highscoreInput #name").val()?$.post("/addScore",{id:socketid,name:$("#highscoreInput #name").val(),score:score}).done(function(e){$("#snakeDiv").hide(),$("#highscores").show();var t="";$.each(e,function(e,o){t+='<tr><td class="name">'+o.name+'</td><td class="score">'+o.highscore+"</td></tr>"}),$("#highscores table").append(t)}):$("#highscoreInput #name").attr("placeholder","please fill in a name")});var count=0;!function e(){var t=navigator.onLine;t?null!==posGlobal?getWorker().postMessage(posGlobal):setTimeout(function(){e()},100):$.getJSON("/scripts/weather/data.json",function(e){workDone({data:e.query.results.channel})})}(),addEventListener("message",handleMessage,!1);var Food=function(e,t){this.x=e,this.y=t};Food.prototype={draw:function(){ctx.fillStyle="#608a36",ctx.fillRect(this.x*celWidth,this.y*celWidth,celWidth,celWidth),ctx.fillStyle="#1f2c13",ctx.font="30px Arial",ctx.fillText("*",this.x*celWidth,this.y*celWidth+2*celWidth+2.5)}};var Snake=function(e,t,o,n,i){this.id=e,this.length=t,this.bodyArr=o,this.startX=n,this.startY=i,this.nx=0,this.ny=0;var s=["up","right","down"];this.direction=s[Math.floor(Math.random()*s.length)],this.tail=null,this.player=null};Snake.prototype={create:function(){for(var e=this.length-1;e>=0;e--)this.bodyArr.push({x:e+this.startX,y:0+this.startY})},draw:function(e,t,o,n,i){this.nx=this.bodyArr[0].x,this.ny=this.bodyArr[0].y,"right"===this.direction?this.nx++:"left"===this.direction?this.nx--:"up"===this.direction?this.ny--:"down"===this.direction&&this.ny++,this.checkEatSelf(o,n),this.eat(i),this.bodyArr.unshift(this.tail);for(var s=0;s<this.bodyArr.length;s++){var a=this.bodyArr[s];ctx.fillStyle=e,ctx.fillRect(a.x*celWidth,a.y*celWidth,celWidth,celWidth),ctx.strokeStyle=t,ctx.lineWidth=1,ctx.strokeRect(a.x*celWidth,a.y*celWidth,celWidth,celWidth)}},checkEatSelf:function(e,t){this.nx<=-1?this.nx=e/celWidth:this.nx==e/celWidth&&(this.nx=-1),this.ny<=-1?this.ny=t/celWidth:this.ny>=t/celWidth&&(this.ny=-1),this.checkCollision()&&socket.emit("dead",{id:this.id})},checkCollision:function(){for(var e=0;e<this.bodyArr.length;e++)if(this.bodyArr[e].x==this.nx&&this.bodyArr[e].y==this.ny)return!0;return!1},eat:function(e){this.nx==e.x&&this.ny==e.y?(this.tail={x:this.nx,y:this.ny},this.length++,socket.emit("newFood",{w:w,h:h,celWidth:celWidth})):(this.tail=this.bodyArr.pop(),this.tail.x=this.nx,this.tail.y=this.ny)}};